# Input File Formats for CloseRead

This document outlines the expected formats for the input files required by the CloseRead pipeline. Ensuring that your files adhere to these specifications will help prevent parsing errors and ensure a smooth execution of the workflow.

---

## 1. HiFi FASTQ/BAM Files

- **Description:**  
  These files contain the raw sequencing reads generated from HiFi sequencing. They can be either in FASTQ or BAM format.
  
- **Location:**  
  Place your files in the following directory structure:
  ```
  $HOME/$fastqdir/$species_name/
  ```
  
- **Notes:**  
  - Ensure that the files are of high quality.
  - No special formatting is required beyond the standard FASTQ/BAM specifications.

---


## 2. Custom IG Loci Annotation File

If you want to bypass the IgDetective step by providing known IG loci positions, use a custom annotation file.

- **File Name:**  
  ```
  ${species_name}.customIG.txt
  ```

- **Expected Format:**  
  The file should be **tab-delimited**. The following format must be followed:

| Species | Haplotype         | Locus | Start  | End    |
|---------|-------------------|-------|--------|--------|
| Emax    | primary/alternate | IGH   | 107000 | 117000 |
| Emax    | primary/alternate | IGH   | 91000  | 95000  |
| Emax    | primary/alternate | IGK   | 142000 | 162000 |

  **Columns (DO NOT INCLUDE A HEADER ROW):**
  1. **Species** - Species ID must remain consistent with all other files
  2. **Haplotype** - Must be either `primary` or `alternate`; If only using consensus assembly, enter `primary`
  3. **Locus** - IG locus (e.g., `IGH`, `IGK`, `IGL`)
  4. **Start** - Start position of the locus
  5. **End** - End position of the locus

- **Notes:**  
  - **DO NOT** include a header row in the actual file (the table above is for explanation purposes only).
  - Ensure consistent use of **tabs** as delimiters.

---

## 3. Species Meta-information File (`species_metainfo.csv`)

This optional CSV file provides additional metadata about the species and assemblies. For PDF generation use only.

- **File Name:**  
  `species_metainfo.csv`
  
- **Example Format:**

```csv
IndividualID,LatinName,CommonName,Source,SourceLink,Haplotype Resolved
rAllMis2,Alligator mississippiensis,American alligator,VGP,https://42basepairs.com/browse/s3/genomeark/species/Alligator_mississippiensis/rAllMis2,Yes
```

- **Notes:**  
  - The file must include a header row.
  - Update or add columns as necessary to capture relevant metadata.

---

## 4. Gene-Level Annotation File

This optional file is used to provide gene-level annotation information. It can be in one of two formats:

### A. IgDetective-Generated Format

- **Description:**  
  Use the output file generated by IgDetective as-is if you wish to rely on its format. No action required

### B. Custom CSV Format

- **Expected Format:**  
  A CSV file with the following columns:
  
  ```csv
  Gene,Chromosome,Strand,Start,End
  IGH,chr14,.,105000,107000
  IGK,chr2,.,89000,91000
  IGL,chr22,.,140000,142000
  ```

- **Notes:**  
  - Ensure the CSV file includes a header row with the same column names
  - The fields must be formatted correctly to enable proper parsing.
  - The Strand column can be empty.

---

## Final Notes

- **File Paths:**  
  Always verify that your file paths are correct and accessible by the pipeline.
  
- **Formatting:**  
  Validate that your FASTA and CSV files follow the required formats to prevent parsing errors.

- **Examples:**  
  Refer to the example files provided in the `example` directory for additional guidance.

If you encounter any issues with file formats or have further questions, please consult the project documentation or submit an issue for assistance.
