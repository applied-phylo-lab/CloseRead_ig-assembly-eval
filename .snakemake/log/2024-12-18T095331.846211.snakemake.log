Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cluster nodes: 2
Job stats:
job                  count
-----------------  -------
all                      1
cigarProcessing          1
convertPrimaryBam        1
coverageAnalysis         1
dataPrepAutomate         1
finalIGLoci              1
lociLocation             1
total                    7

Resources before job selection: {'_cores': 9223372036854775807, '_nodes': 2}
Ready jobs (2)
Select jobs to execute...
Selected jobs (2)
Resources after job selection: {'_cores': 9223372036854775787, '_nodes': 0}

[Wed Dec 18 09:53:32 2024]
rule lociLocation:
    input: /home1/zhuyixin/zhuyixin_proj/AssmQuality/assemblies/human.IGH.fasta, /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/igDetective.sh
    output: /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt
    log: /home1/zhuyixin/zhuyixin_proj/AssmQuality/log/igDetective.human.log
    jobid: 5
    reason: Missing output files: /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt; Set of input files has changed since last execution
    wildcards: HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality, species=human
    threads: 10
    resources: mem_mb=30000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, mem=30G


        if [ ! -f "/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt" ]; then
            /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/igDetective.sh /home1/zhuyixin/zhuyixin_proj/AssmQuality/assemblies/human.IGH.fasta /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.igdetective/ human pri /home1/zhuyixin/zhuyixin_proj/AssmQuality /home1/zhuyixin/IgDetective /spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh /home1/zhuyixin/.conda/envs
        fi
        if [ "True" == "False" ] && [ ! -f "/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.alt.txt" ]; then
            /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/igDetective.sh  /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.alt.igdetective/ human alt /home1/zhuyixin/zhuyixin_proj/AssmQuality /home1/zhuyixin/IgDetective /spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh /home1/zhuyixin/.conda/envs
        fi
        
Jobscript:
#!/bin/sh
# properties = {"type": "single", "rule": "lociLocation", "local": false, "input": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/assemblies/human.IGH.fasta", "/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/igDetective.sh"], "output": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt"], "wildcards": {"HOME": "/home1/zhuyixin/zhuyixin_proj/AssmQuality", "species": "human"}, "params": {"pri_outdir": "/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.igdetective/", "alt_outdir": "/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.alt.igdetective/", "species": "human", "igdetective_home": "/home1/zhuyixin/IgDetective", "conda": "/spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh", "haploid": "True", "condaEnv": "/home1/zhuyixin/.conda/envs"}, "log": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/log/igDetective.human.log"], "threads": 10, "resources": {"mem_mb": 30000, "mem_mib": 954, "disk_mb": 1000, "disk_mib": 954, "tmpdir": "<TBD>", "mem": "30G"}, "jobid": 5, "cluster": {}}
cd /project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval && /home1/zhuyixin/.conda/envs/assembly/bin/python3.10 -m snakemake --snakefile '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/Snakefile' --target-jobs 'lociLocation:HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality,species=human' --allowed-rules 'lociLocation' --cores 'all' --attempt 1 --force-use-threads  --resources 'mem_mb=30000' 'mem_mib=954' 'disk_mb=1000' 'disk_mib=954' --wait-for-files '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq' '/home1/zhuyixin/zhuyixin_proj/AssmQuality/assemblies/human.IGH.fasta' '/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/igDetective.sh' --force --keep-target-files --keep-remote --max-inventory-time 0 --nocolor --notemp --no-hooks --nolock --ignore-incomplete --rerun-triggers 'mtime' 'software-env' 'code' 'input' 'params' --skip-script-cleanup  --conda-frontend 'mamba' --wrapper-prefix 'https://github.com/snakemake/snakemake-wrappers/raw/' --printshellcmds  --latency-wait 60000 --scheduler 'ilp' --scheduler-solver-path '/home1/zhuyixin/.conda/envs/assembly/bin' --default-resources 'mem_mb=max(2*input.size_mb, 1000)' 'disk_mb=max(2*input.size_mb, 1000)' 'tmpdir=system_tmpdir' --mode 2 && touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/5.jobfinished' || (touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/5.jobfailed'; exit 1)

Submitted job 5 with external jobid 'Submitted batch job 28553915'.

[Wed Dec 18 09:53:34 2024]
rule dataPrepAutomate:
    input: /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh
    output: /home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam, /home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam.csi
    log: /home1/zhuyixin/zhuyixin_proj/AssmQuality/log/dataPrepAutomated.human.log
    jobid: 3
    reason: Missing output files: /home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam
    wildcards: HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality, species=human
    threads: 10
    resources: mem_mb=60000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, mem=60G


        /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh -s human -w hifi_fastq -h True -d /home1/zhuyixin/zhuyixin_proj/AssmQuality -c /spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh -e /home1/zhuyixin/.conda/envs
        
Jobscript:
#!/bin/sh
# properties = {"type": "single", "rule": "dataPrepAutomate", "local": false, "input": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh"], "output": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam", "/home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam.csi"], "wildcards": {"HOME": "/home1/zhuyixin/zhuyixin_proj/AssmQuality", "species": "human"}, "params": {"species": "human", "source": "hifi_fastq", "haploid": "True", "conda": "/spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh", "condaEnv": "/home1/zhuyixin/.conda/envs"}, "log": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/log/dataPrepAutomated.human.log"], "threads": 10, "resources": {"mem_mb": 60000, "mem_mib": 954, "disk_mb": 1000, "disk_mib": 954, "tmpdir": "<TBD>", "mem": "60G"}, "jobid": 3, "cluster": {}}
cd /project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval && /home1/zhuyixin/.conda/envs/assembly/bin/python3.10 -m snakemake --snakefile '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/Snakefile' --target-jobs 'dataPrepAutomate:HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality,species=human' --allowed-rules 'dataPrepAutomate' --cores 'all' --attempt 1 --force-use-threads  --resources 'mem_mb=60000' 'mem_mib=954' 'disk_mb=1000' 'disk_mib=954' --wait-for-files '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq' '/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh' --force --keep-target-files --keep-remote --max-inventory-time 0 --nocolor --notemp --no-hooks --nolock --ignore-incomplete --rerun-triggers 'mtime' 'software-env' 'code' 'input' 'params' --skip-script-cleanup  --conda-frontend 'mamba' --wrapper-prefix 'https://github.com/snakemake/snakemake-wrappers/raw/' --printshellcmds  --latency-wait 60000 --scheduler 'ilp' --scheduler-solver-path '/home1/zhuyixin/.conda/envs/assembly/bin' --default-resources 'mem_mb=max(2*input.size_mb, 1000)' 'disk_mb=max(2*input.size_mb, 1000)' 'tmpdir=system_tmpdir' --mode 2 && touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/3.jobfinished' || (touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/3.jobfailed'; exit 1)

Submitted job 3 with external jobid 'Submitted batch job 28553916'.
[Wed Dec 18 10:11:43 2024]
Finished job 5.
1 of 7 steps (14%) done
Resources before job selection: {'_cores': 9223372036854775797, '_nodes': 1}
Ready jobs (1)
Select jobs to execute...
Using greedy selector because only single job has to be scheduled.
Selected jobs (1)
Resources after job selection: {'_cores': 9223372036854775787, '_nodes': 0}

[Wed Dec 18 10:11:43 2024]
rule finalIGLoci:
    input: /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/finalGene.py, /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt
    output: /home1/zhuyixin/zhuyixin_proj/AssmQuality/gene_position/human.final.Ig_loci.txt
    jobid: 4
    reason: Missing output files: /home1/zhuyixin/zhuyixin_proj/AssmQuality/gene_position/human.final.Ig_loci.txt; Input files updated by another job: /home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt
    wildcards: HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality, species=human
    threads: 10
    resources: mem_mb=30000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, mem=30G


        rm -rf /home1/zhuyixin/zhuyixin_proj/AssmQuality/gene_position/human.final.Ig_loci.txt
        touch /home1/zhuyixin/zhuyixin_proj/AssmQuality/gene_position/human.final.Ig_loci.txt
        python /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/finalGene.py human /home1/zhuyixin/zhuyixin_proj/AssmQuality
        
Jobscript:
#!/bin/sh
# properties = {"type": "single", "rule": "finalIGLoci", "local": false, "input": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/finalGene.py", "/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt"], "output": ["/home1/zhuyixin/zhuyixin_proj/AssmQuality/gene_position/human.final.Ig_loci.txt"], "wildcards": {"HOME": "/home1/zhuyixin/zhuyixin_proj/AssmQuality", "species": "human"}, "params": {"species": "human"}, "log": [], "threads": 10, "resources": {"mem_mb": 30000, "mem_mib": 954, "disk_mb": 1000, "disk_mib": 954, "tmpdir": "<TBD>", "mem": "30G"}, "jobid": 4, "cluster": {}}
cd /project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval && /home1/zhuyixin/.conda/envs/assembly/bin/python3.10 -m snakemake --snakefile '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/Snakefile' --target-jobs 'finalIGLoci:HOME=/home1/zhuyixin/zhuyixin_proj/AssmQuality,species=human' --allowed-rules 'finalIGLoci' --cores 'all' --attempt 1 --force-use-threads  --resources 'mem_mb=30000' 'mem_mib=954' 'disk_mb=1000' 'disk_mib=954' --wait-for-files '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq' '/home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/finalGene.py' '/home1/zhuyixin/zhuyixin_proj/AssmQuality/igGene/human.pri.txt' --force --keep-target-files --keep-remote --max-inventory-time 0 --nocolor --notemp --no-hooks --nolock --ignore-incomplete --rerun-triggers 'mtime' 'software-env' 'code' 'input' 'params' --skip-script-cleanup  --conda-frontend 'mamba' --wrapper-prefix 'https://github.com/snakemake/snakemake-wrappers/raw/' --printshellcmds  --latency-wait 60000 --scheduler 'ilp' --scheduler-solver-path '/home1/zhuyixin/.conda/envs/assembly/bin' --default-resources 'mem_mb=max(2*input.size_mb, 1000)' 'disk_mb=max(2*input.size_mb, 1000)' 'tmpdir=system_tmpdir' --mode 2 && touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/4.jobfinished' || (touch '/project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/4.jobfailed'; exit 1)

Submitted job 4 with external jobid 'Submitted batch job 28554195'.
[Wed Dec 18 10:11:53 2024]
Finished job 4.
2 of 7 steps (29%) done
[Wed Dec 18 13:15:05 2024]
Error in rule dataPrepAutomate:
    jobid: 3
    input: /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh
    output: /home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam, /home1/zhuyixin/zhuyixin_proj/AssmQuality/aligned_bam/human/human_merged_sorted.bam.csi
    log: /home1/zhuyixin/zhuyixin_proj/AssmQuality/log/dataPrepAutomated.human.log (check log file(s) for error details)
    shell:
        
        /home1/zhuyixin/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/code/dataPrepAutomated.sh -s human -w hifi_fastq -h True -d /home1/zhuyixin/zhuyixin_proj/AssmQuality -c /spack/conda/miniconda3/23.10.0/etc/profile.d/conda.sh -e /home1/zhuyixin/.conda/envs
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    cluster_jobid: Submitted batch job 28553916

Error executing rule dataPrepAutomate on cluster (jobid: 3, external: Submitted batch job 28553916, jobscript: /project/mpennell_978/zhuyixin_proj/AssmQuality/code/CloseRead_ig-assembly-eval/.snakemake/tmp.35wv1tcq/snakejob.dataPrepAutomate.3.sh). For error details see the cluster log and the log files of the involved rule(s).
Cleanup job metadata.
Cleanup failed jobs output files.
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-12-18T095331.846211.snakemake.log
unlocking
removing lock
removing lock
removed all locks
